
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<meta property="og:title" content="Biased Benchmarks" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://matthewrocklin.com/biased-benchmarks.html" />
  
<meta property="og:description" content="honesty is hard This work is supported by Continuum Analytics the XDATA Program and the Data Driven Discovery Initiative from the Moore Foundation. Summary: Performing benchmarks to compare softwar..." />
  
<meta property="og:image" content="https://matthewrocklin.com/_static/profile.jpg" />
  
<meta property="og:image:alt" content="Biased Benchmarks" />
  
    <title>Biased Benchmarks &#8212; Matthew Rocklin</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-dropdown.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-ZCP1VCVST7"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-ZCP1VCVST7');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'biased-benchmarks';</script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en"> 
<link
  rel="alternate"
  type="application/atom+xml"
  href="./atom.xml"
  title="Matthew Rocklin's Working Notes"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search ..." aria-label="Search ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">Matthew Rocklin</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="articles.html">
                        Articles
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://matthewrocklin.com/blog">
                        Old Blog
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search ..." aria-label="Search ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
      </div>
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/mrocklin/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://twitter.com/mrocklin" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@mrocklin" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-mastodon"></i></span>
            <label class="sr-only">Mastodon</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://matthewrocklin.com/atom.xml" title="Atom Feed" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-solid fa-rss"></i></span>
            <label class="sr-only">Atom Feed</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="articles.html">
                        Articles
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://matthewrocklin.com/blog">
                        Old Blog
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search ..." aria-label="Search ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
      </div>
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/mrocklin/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://twitter.com/mrocklin" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@mrocklin" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-mastodon"></i></span>
            <label class="sr-only">Mastodon</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://matthewrocklin.com/atom.xml" title="Atom Feed" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-solid fa-rss"></i></span>
            <label class="sr-only">Atom Feed</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
<p aria-level="2" class="caption" role="heading">
  <span class="caption-text">
    <i>Originally authored 2017-03-09</i>
  </span>
</p>
<hr/>

  <p class="bd-links__title" role="heading" aria-level="1">
    Best Of
  </p>
  <div class="bd-toc-item navbar-nav">
    <p aria-level="2" class="caption" role="heading"><span class="caption-text">Startups</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="startup-best-practices.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="think.html">Think for yourself</a></li>
<li class="toctree-l1"><a class="reference internal" href="meetings.html">Meetings</a></li>
<li class="toctree-l1"><a class="reference internal" href="offsites.html">Offsites</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="startup-revenue.html">Revenue Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="failure.html">Failure</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Writing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="redesign-blog.html">Redesigning my Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio-visual.html">Audio-Visual Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="brevity.html">Short Attention Span</a></li>
<li class="toctree-l1"><a class="reference internal" href="write-short-blogposts.html">Short Blogposts</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Engineering</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="scipy-mission.html">SciPy Mission</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintainer.html">Maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="slack-github.html">Why I Avoid Slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="senior-engineer.html">Senior Engineers</a></li>
<li class="toctree-l1"><a class="reference internal" href="stability-bias.html">Stability Bias</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical-lead.html">Tech Leads</a></li>
<li class="toctree-l1"><a class="reference internal" href="engineers-and-sales.html">Listen to Sell</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Programming</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="minimal-bug-reports.html">Craft Minimal Bug Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="avoid-indirection.html">Avoid Indirection</a></li>
<li class="toctree-l1"><a class="reference internal" href="biased-benchmarks.html">Biased Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="write-dumb-code.html">Write Dumb Code</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>



  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            


            <article class="bd-article" role="main">
               <section id="biased-benchmarks">
<h1>Biased Benchmarks<a class="headerlink" href="#biased-benchmarks" title="Permalink to this heading">#</a></h1>
<p><em>honesty is hard</em></p>
<p><em>This work is supported by <a class="reference external" href="http://continuum.io">Continuum Analytics</a>
the <a class="reference external" href="http://www.darpa.mil/program/XDATA">XDATA Program</a>
and the Data Driven Discovery Initiative from the <a class="reference external" href="https://www.moore.org/">Moore
Foundation</a>.</em></p>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>Performing benchmarks to compare software is surprisingly difficult to do
fairly, even assuming the best intentions of the author.  Technical developers
can fall victim to a few natural human failings:</p>
<ol class="arabic simple">
<li><p>We judge other projects by our own objectives rather than the objectives under which that project was developed</p></li>
<li><p>We fail to use other projects with the same expertise that we have for our own</p></li>
<li><p>We naturally gravitate towards cases at which our project excels</p></li>
<li><p>We improve our software during the benchmarking process</p></li>
<li><p>We don’t release negative results</p></li>
</ol>
<p>We discuss each of these failings in the context of current benchmarks I’m
working on comparing Dask and Spark Dataframes.</p>
</section>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>Last week I started comparing performance between Dask Dataframes (a project
that I maintain) and Spark Dataframes (the current standard).  My initial
results showed that Dask.dataframes were overall <em>much</em> faster, somewhere like
5x.</p>
<p>These results were wrong.  They weren’t wrong in a factual sense, and the
experiments that I ran were clear and reproducible, but there was so much bias
in how I selected, set up, and ran those experiments that the end result was
misleading.  After checking results myself and then having other experts come
in and check my results I now see much more sensible numbers.  At the moment
both projects are within a factor of two most of the time, with some
interesting exceptions either way.</p>
<p>This blogpost outlines the ways in which library authors can fool themselves
when performing benchmarks, using my recent experience as an anecdote.  I hope
that this encourages authors to check themselves, and encourages readers to be
more critical of numbers that they see in the future.</p>
<p>This problem exists as well in academic research.  For a pop-science rendition
I recommend <a class="reference external" href="http://www.npr.org/sections/money/2016/01/15/463237871/episode-677-the-experiment-experiment">“The Experiment Experiment” on the Planet Money
Podcast</a>.</p>
</section>
<section id="skewed-objectives">
<h2>Skewed Objectives<a class="headerlink" href="#skewed-objectives" title="Permalink to this heading">#</a></h2>
<p><em>Feature X is so important.  I wonder how the competition fares?</em></p>
<p>Every project is developed with different applications in mind and so has
different strengths and weaknesses.  If we approach a benchmark caring only
about our original objectives and dismissing the objectives of the other
projects then we’ll very likely trick ourselves.</p>
<p>For example consider reading CSV files.  Dask’s CSV reader is based off of
Pandas’ CSV reader, which was the target of great effort and love; this is
because CSV was so important to the finance community where Pandas grew up.
Spark’s CSV solution is less awesome, but that’s less about the quality of
Spark and more a statement about how Spark users tend not to use CSV.  When
they use text-based formats they’re much more likely to use line-delimited
JSON, which is typical in Spark’s common use cases (web diagnostics, click
logs, and so on).  Pandas/Dask came from the scientific and finance worlds where CSV
is king while Spark came from the web world where JSON reigns.</p>
<p>Conversely, Dask.dataframe hasn’t bothered to hook up the <code class="docutils literal notranslate"><span class="pre">pandas.read_json</span></code>
function to Dask.dataframe yet.  Surprisingly it rarely comes up.  Both
projects can correctly say that the other project’s solution to what they
consider the standard text-based file format is less-than-awesome.  Comparing
performance here either way will likely lead to misguided conclusions.</p>
<p>So when benchmarking data ingestion maybe we look around a bit, see that both
claim to support Parquet well, and use that as the basis for comparison.</p>
</section>
<section id="skewed-experience">
<h2>Skewed Experience<a class="headerlink" href="#skewed-experience" title="Permalink to this heading">#</a></h2>
<p><em>Whoa, this other project has a lot of configuration parameters!  Let’s just use
the defaults.</em></p>
<p>Software is often easy to set up, but often requires experience to set up
optimally.  Authors are naturally more adept at setting up their own software
than the software of their competition.</p>
<p>My original (and flawed) solution to this was to “just use the defaults” on
both projects.  Given my inability to tune Spark (there are several dozen
parameters) I decided to also not tune Dask and run under default settings.  I
figured that this would be a good benchmark not only of the software, but also
on choices for sane defaults, which is a good design principle in itself.</p>
<p>This failed spectacularly because I was making unconscious decisions like the
size of machines that I was using for the experiment, CPU/memory ratios, and so on.
It turns out that Spark’s defaults are optimized for <em>very small machines</em> (or
more likely, small YARN containers) and use only 1GB of memory per executor by
default while Dask is typically run on larger boxes or has the full use of a
single machine in a single shared-memory process.  My standard cluster
configurations were biased towards Dask before I even considered running a
benchmark.</p>
<p>Similarly the APIs of software projects are complex and for any given problem
there is often both a fast way and a general-but-slow way.  Authors naturally
choose the fast way on their own system but inadvertently choose the general
way that comes up first when reading documentation for the other project.  It
often takes months of hands-on experience to understand a project well enough
to definitely say that you’re not doing things in a dumb way.</p>
<p>In both cases I think the only solution is to collaborate with someone that
primarily uses the other system.</p>
</section>
<section id="preference-towards-strengths">
<h2>Preference towards strengths<a class="headerlink" href="#preference-towards-strengths" title="Permalink to this heading">#</a></h2>
<p><em>Oh hey, we’re doing <strong>really</strong> well here.  This is great!  Let’s dive into this a
bit more.</em></p>
<p>It feels great to see your project doing well.  This emotional pleasure
response is powerful.  It’s only natural that we pursue that feeling more,
exploring different aspects of it.  This can skew our writing as well.  We’ll
find that we’ve decided to devote 80% of the text to what originally seemed
like a small set of features, but which now seems like <em>the main point</em>.</p>
<p>It’s important that we define a set of things we’re going to study ahead of
time and then stick to those things.  When we run into cases where our project
fails we should take that as an opportunity to raise an issue for future
(though not current) development.</p>
</section>
<section id="tuning-during-experimentation">
<h2>Tuning during experimentation<a class="headerlink" href="#tuning-during-experimentation" title="Permalink to this heading">#</a></h2>
<p><em>Oh, I know why this is slow.  One sec, let me change something in the code.</em></p>
<p>I’m doing this right now.  Dask dataframe shuffles are generally slower than
Spark dataframe shuffles.  On numeric data this used to be around a 2x
difference, now it’s more like a 1.2x difference (at least on my current
problem and machine).  Overall this is great, seeing that another project was
beating Dask motivated me to dive in <a class="reference external" href="https://github.com/dask/distributed/issues/932">(see dask/distributed
#932)</a> and this will result in
a better experience for users in the future.  As a developer this is also how I
operate.  I define a benchmark, profile my code, identify bottlenecks, and
optimize.  Business as usual.</p>
<p>However as an author of a comparative benchmark this is also somewhat dishonest;
I’m not giving the Spark developers the same opportunity to find and fix
similar performance issues in their software before I publish my results.  I’m
also giving a biased picture to my readers.  I’ve made all of the pieces that
I’m going to show off fast while neglecting the others.  Picking benchmarks,
optimizing the project to make them fast, and then publishing those results
gives the incorrect impression that the entire project has been optimized to
that level.</p>
</section>
<section id="omission">
<h2>Omission<a class="headerlink" href="#omission" title="Permalink to this heading">#</a></h2>
<p><em>So, this didn’t go as planned.  Let’s wait a few months until the next release.</em></p>
<p>There is no motivation to publish negative results.  Unless of course you’ve
just written a blogpost announcing that you plan to release benchmarks in the
near future.  Then you’re really forced to release numbers, even if they’re
mixed.</p>
<p>That’s ok. Mixed numbers can be informative.  They build trust and
community.  And we all talk about open source community driven software, so
these should be welcome.</p>
</section>
<section id="straight-up-bias">
<h2>Straight up bias<a class="headerlink" href="#straight-up-bias" title="Permalink to this heading">#</a></h2>
<p><em>Look, we’re not in grad-school any more.  We’ve got to convince companies to
actually use this stuff.</em></p>
<p>Everything we’ve discussed so far assumes best intentions, and that the author is
acting in good faith, but falling victim to basic human failings.</p>
<p>However many developers today (including myself) are paid and work for
for-profit companies that need to make money.  To an increasing extent making
this money depends on community mindshare, which means publishing
benchmarks that sway users to our software.  Authors have bosses that
they’re trying to impress or the content and tone of an article may be
influenced by people within the company other than the stated author.</p>
<p>I’ve been pretty lucky working with Continuum Analytics (my employer) in that
they’ve been pretty hands-off with technical writing.  For other
employers that may be reading, we’ve actually had an easier time getting
business because of the honest tone in these blogposts in some cases.
Potential clients generally have the sense that we’re trustworthy.</p>
<p>Technical honesty goes a surprisingly long way towards implying technical
proficiency.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     
    <a href="write-tests.html">
      <i class="fa fa-arrow-circle-left"></i> Write Tests
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     
    <a href="write-dumb-code.html">
      Write Dumb Code <i
        class="fa fa-arrow-circle-right"
      ></i
      >
    </a>
    
  </span>
</div>
  
</div>

            </article>
            



<script src="https://giscus.app/client.js"
        data-repo="mrocklin/mrocklin.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzNDAzMTEz"
        data-category="Giscus"
        data-category-id="DIC_kwDOADPtac4CTY1R"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>




            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
            
          </div>
          
          
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022, Matthew Rocklin.<br>

</p>

  </div>
  
</div>
  </footer>
  </body>
</html>